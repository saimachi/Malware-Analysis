import base64
import binascii


if __name__ == '__main__':
    with open('/home/sai/web-malware/website-682886/www.joncomet.com/web/content/htphjykdqy.log', 'r') as infile, open('decoded.log', 'w') as outfile:
        for line in infile.readlines():
            try:
                decoded = base64.b64decode(line)
            except binascii.Error:
                decoded = b''
            if decoded == b'':
                outfile.write(line)
            else:
                try:
                    outfile.write(decoded.decode('utf-8'))
                except UnicodeDecodeError:
                    outfile.write(line)
            outfile.write('\n')
